@* Displays sale page *@
@(sale: Sale, isAdmin: Boolean)

@loggedinmain("Sale") {
<div class="container content">
    <div class="view profile" id="view-profile">
        <div class="row">
            <div class="col-sm-4">
                <a href="/sale/@sale.id/addItem" class="btn btn-success">ADD ITEM</a>
                @if(isAdmin) {<a href="/sale/@sale.id/edit" class="btn btn-success">EDIT SALE</a>}
            </div>
            <div class="col-sm-5"></div>
            <div class="col-sm-3">
                <div class="input-group">
                    <form class="form-search-field" action="/sale/@sale.id/searchItems" method="post">
                        <div class="input-group">
                            <input type="text" class="form-control" name="query" placeholder="Search Items...">
                        <span class="input-group-btn">
                            <button class="btn btn-default icon" type="submit"><i class="glyphicon glyphicon-search"></i></button>
                        </span>
                        </div><!-- /input-group -->
                    </form>
                </div>
            </div>
        </div>

        <ul class="saleList">
            <h1 class="text-center" id="saleName">@sale.name</h1>
            <div class="row">
                <div class="col-sm-3" id="saleAddress">
                    <h3 class="text-center">Address</h3>
                    <h4 id="saleAddress1">@sale.street</h4>
                    <h4 id="saleAddress2">@sale.city, @sale.state @sale.zip</h4>
                </div>
                <div class="col-sm-4">
                    <h3 class="text-center">Description</h3>
                    <h4 id="saleDescription">@sale.description</h4>
                </div>
                <div class="col-sm-2">
                    <h3 class="text-center">Created By</h3>
                    <h4 id="saleCreatedBy" class="text-center">@sale.createdBy</h4>
                </div>
                <div class="col-sm-3">
                    <h3 class="text-center">Dates</h3>
                    <h4 id="saleDates">@sale.formatStartDate - @sale.formatEndDate</h4>
                </div>
            </div>
            <h2 class="text-center">Items for Sale</h2>
            <div class="row">
                <div class="col-sm-2"></div>
                <div class="col-sm-8 items"></div>
            </div>
        </ul>
    </div>
</div>

<!-- script to add item info from database -->
<script>

    // Populate page with sale items
    $.post("/getItems", { "saleId" : "@sale.id" }).done(function( data ) {
        for(var i in data) {
            var output = "<h2><a href=\"/sale/@sale.id/item/" + data[i].id + "\">" + data[i].name + "</a></h2>" + "<h3>" + data[i].description+ "</h3>" + "<h3>"
                + data[i].price + "</h3></div><hr>";
            $(".items").append(output)
        }
    });

</script>

}
